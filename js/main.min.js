import{Snap}from"https://esm.sh/vevet@5";const imageFilenames=window.DRAPE_IMAGES||[],carousel=document.getElementById("carousel");carousel.innerHTML="",imageFilenames.forEach(e=>{const t=document.createElement("div");t.className="slide",t.style.willChange="transform";const n=document.createElement("img");n.src=e,n.alt=e,n.onerror=function(){this.style.display="none"},t.appendChild(n),carousel.appendChild(t)});const snap=new Snap({container:carousel,direction:"horizontal",grabCursor:!0,centered:!0,loop:!0});let autoScrollTimer;window.snap=snap;const minInterval=30,maxInterval=1e3;let currentInterval=30,spinStartTime=0,isIntroActive=!0,isInteracting=!1;function scheduleNext(){if(autoScrollTimer&&clearTimeout(autoScrollTimer),isInteracting&&!isIntroActive)return;const e=Date.now()-spinStartTime;if(e<3e3){if(snap&&"function"==typeof snap.next&&snap.next(),e<1e3)currentInterval=50;else if(e<1500)currentInterval=200;else if(e<2e3)currentInterval=500;else{const t=(e-2e3)/1e3,n=Math.pow(t,3);currentInterval=500+1e3*n}autoScrollTimer=setTimeout(scheduleNext,currentInterval)}else isIntroActive=!1}function startAutoScroll(e=!1){autoScrollTimer&&clearTimeout(autoScrollTimer),isInteracting=!1,e&&(currentInterval=30,isIntroActive=!0,spinStartTime=Date.now(),snap&&snap.updateProps({friction:.1,lerp:.08})),scheduleNext()}function onInteractStart(){isIntroActive||(isInteracting=!0,autoScrollTimer&&clearTimeout(autoScrollTimer))}function onInteractEnd(){isIntroActive||(isInteracting=!1,currentInterval=1e3,setTimeout(()=>{isInteracting||startAutoScroll(!1)},500))}snap&&snap.updateProps({freemode:!1,friction:.1,lerp:.08,wheel:!0,wheelSpeed:20,followWheel:!1,wheelThrottle:100,wheelAxis:"x"}),carousel&&(carousel.addEventListener("mouseenter",onInteractStart),carousel.addEventListener("mouseleave",onInteractEnd),carousel.addEventListener("touchstart",onInteractStart),carousel.addEventListener("touchend",onInteractEnd)),snap&&(snap.on("dragstart",onInteractStart),snap.on("dragend",onInteractEnd));const hoverScrollSpeed=1200;let hoverScrollTimer=null,currentHoverZone=null;const supportsHover=window.matchMedia("(hover: hover)").matches;supportsHover&&carousel&&snap&&(carousel.addEventListener("mousemove",e=>{if(isIntroActive)return;const t=carousel.getBoundingClientRect(),n=e.clientX-t.left<t.width/2?"left":"right";n!==currentHoverZone&&(currentHoverZone=n,hoverScrollTimer&&clearInterval(hoverScrollTimer),hoverScrollTimer=setInterval(()=>{"right"===currentHoverZone&&"function"==typeof snap.next?snap.next():"left"===currentHoverZone&&"function"==typeof snap.prev&&snap.prev()},1200))}),carousel.addEventListener("mouseleave",()=>{hoverScrollTimer&&(clearInterval(hoverScrollTimer),hoverScrollTimer=null),currentHoverZone=null}));const scrollHintText=document.querySelector(".scroll-hint .text"),scrollHintSection=document.getElementById("scrollHint");scrollHintText&&scrollHintSection&&(scrollHintText.textContent=supportsHover?"HOVER / DRAG TO VIEW MORE":"DRAG TO VIEW MORE",scrollHintSection.style.opacity="0",scrollHintSection.style.transition="opacity 0.4s",setTimeout(()=>{scrollHintSection.style.opacity="1",setTimeout(()=>{scrollHintSection.style.opacity="0"},3e3)},800)),window.addEventListener("load",()=>{setTimeout(()=>startAutoScroll(!0),50)}),snap.on("update",()=>{const e=window.innerWidth<600,t=e?320:200,n=e?36:20,o=1/(180/n),r=n*Math.PI/180/2;snap.slides.forEach(({element:e,coord:i,progress:l,size:a})=>{const s=1-Math.cos(l*o*Math.PI),c=l*(a/3)*s,d=.5*a/Math.sin(r)*s-t,u=l*n;e.style.transform=`translateX(${i+c}px) translateZ(${d}px) rotateY(${u}deg)`})});const loaderIcon=document.getElementById("loaderIcon"),svgList=['<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-camera-icon lucide-camera"><path d="M13.997 4a2 2 0 0 1 1.76 1.05l.486.9A2 2 0 0 0 18.003 7H20a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V9a2 2 0 0 1 2-2h1.997a2 2 0 0 0 1.759-1.048l.489-.904A2 2 0 0 1 10.004 4z"/><circle cx="12" cy="13" r="3"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-film-icon lucide-film"><rect width="18" height="18" x="3" y="3" rx="2"/><path d="M7 3v18"/><path d="M3 7.5h4"/><path d="M3 12h18"/><path d="M3 16.5h4"/><path d="M17 3v18"/><path d="M17 7.5h4"/><path d="M17 16.5h4"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-shirt-icon lucide-shirt"><path d="M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-watch-icon lucide-watch"><path d="M12 10v2.2l1.6 1"/><path d="m16.13 7.66-.81-4.05a2 2 0 0 0-2-1.61h-2.68a2 2 0 0 0-2 1.61l-.78 4.05"/><path d="m7.88 16.36.8 4a2 2 0 0 0 2 1.61h2.72a2 2 0 0 0 2-1.61l.81-4.05"/><circle cx="12" cy="12" r="6"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-sparkles-icon lucide-sparkles"><path d="M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z"/><path d="M20 2v4"/><path d="M22 4h-4"/><circle cx="4" cy="20" r="2"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-palette-icon lucide-palette"><path d="M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z"/><circle cx="13.5" cy="6.5" r=".5" fill="currentColor"/><circle cx="17.5" cy="10.5" r=".5" fill="currentColor"/><circle cx="6.5" cy="12.5" r=".5" fill="currentColor"/><circle cx="8.5" cy="7.5" r=".5" fill="currentColor"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-scissors-icon lucide-scissors"><circle cx="6" cy="6" r="3"/><path d="M8.12 8.12 12 12"/><path d="M20 4 8.12 15.88"/><circle cx="6" cy="18" r="3"/><path d="M14.8 14.8 20 20"/></svg>','<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-person-standing-icon lucide-person-standing"><circle cx="12" cy="5" r="1"/><path d="m9 20 3-6 3 6"/><path d="m6 8 6 2 6-2"/><path d="M12 10v4"/></svg>'];let svgIndex=0,loaderInterval=null;function startLoaderAnimation(){loaderIcon?(svgIndex=Math.floor(Math.random()*svgList.length),loaderIcon.innerHTML=svgList[svgIndex],loaderInterval=setInterval(()=>{svgIndex=(svgIndex+1)%svgList.length,loaderIcon.innerHTML=svgList[svgIndex]},200)):console.error("loaderIcon not found!")}function stopLoaderAnimation(){loaderInterval&&(clearInterval(loaderInterval),loaderInterval=null)}function allImagesLoaded(e){const t=carousel.querySelectorAll("img");let n=0;if(0===t.length)return e();t.forEach(o=>{o.complete&&0!==o.naturalWidth?(n++,n===t.length&&e()):(o.addEventListener("load",()=>{n++,n===t.length&&e()}),o.addEventListener("error",()=>{n++,n===t.length&&e()}))})}window.addEventListener("DOMContentLoaded",()=>{const e=document.querySelector(".logo-bar"),t=document.querySelector(".hero-section"),n=document.querySelector(".footer-bar"),o=document.getElementById("scrollHint");e&&(e.style.display=""),t&&(t.style.display="none"),n&&(n.style.display="none"),o&&(o.style.display="none"),startLoaderAnimation(),setTimeout(()=>{const e=document.getElementById("scrollHint");e&&(e.style.opacity="0",e.style.transition="opacity 1s",setTimeout(()=>{e.style.display="none"},1e3))},3200),allImagesLoaded(()=>{stopLoaderAnimation();const e=document.getElementById("pageLoader");e&&(e.classList.add("hide"),e.style.display="none"),t&&(t.style.display=""),n&&(n.style.display=""),o&&(o.style.display="")})}),carousel.classList.add("ready");const queueCount=document.getElementById("queueCount"),loader=document.getElementById("pageLoader");function getOrCreateVisitId(){let e=localStorage.getItem("drape_visit_id");return e||(e=crypto.randomUUID(),localStorage.setItem("drape_visit_id",e)),window.DRAPE_VISIT_ID=e,e}function getUTMParams(){const e=new URLSearchParams(window.location.search);return{utm_source:e.get("utm_source")||"",utm_medium:e.get("utm_medium")||"",utm_campaign:e.get("utm_campaign")||"",utm_term:e.get("utm_term")||"",utm_content:e.get("utm_content")||"",referrer:document.referrer||""}}const user_agent=navigator.userAgent;async function getIPGeo(){try{const e=await fetch("/api/geo");if(!e.ok)throw new Error("Failed");const t=await e.json();return{ip:t.ip||"",ip_details:t.ip_details||""}}catch{return{ip:"",ip_details:""}}}async function initWaitlistButton(){const e=getUTMParams(),{ip:t,ip_details:n}=await getIPGeo(),o={visit_id:getOrCreateVisitId(),...e,user_agent:user_agent,ip:t,ip_details:n};let r,i=!1;r=setTimeout(()=>{if(!i){loader&&(loader.style.display="none"),queueCount&&(queueCount.textContent="");const e=document.getElementById("joinWaitlistBtn");e&&(e.innerHTML="Join Waitlist Now")}},2e3);try{const e=await fetch("/api/visit",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),t=await e.json();t&&"number"==typeof t.waitlist_number&&(i=!0,clearTimeout(r),loader&&(loader.style.display="none"),queueCount&&(queueCount.textContent=t.waitlist_number))}catch{}}window.addEventListener("DOMContentLoaded",initWaitlistButton);const waitlistForm=document.getElementById("waitlistForm"),countryCodeMap={IN:"+91",US:"+1",GB:"+44",CA:"+1",AU:"+61",SG:"+65",DE:"+49",FR:"+33",IT:"+39",ES:"+34",CN:"+86",JP:"+81",BR:"+55",ZA:"+27",RU:"+7",MX:"+52",AE:"+971",KR:"+82",SA:"+966",ID:"+62",PK:"+92",BD:"+880",NG:"+234",EG:"+20",TR:"+90",TH:"+66",MY:"+60",PH:"+63",VN:"+84",UA:"+380",PL:"+48",AR:"+54",CO:"+57",CL:"+56",NZ:"+64",SE:"+46",NO:"+47",FI:"+358",DK:"+45",IE:"+353",CH:"+41",BE:"+32",NL:"+31",AT:"+43",GR:"+30",PT:"+351",CZ:"+420",HU:"+36",RO:"+40",SK:"+421",BG:"+359",HR:"+385",SI:"+386",LT:"+370",LV:"+371",EE:"+372",LU:"+352",IS:"+354",MT:"+356",CY:"+357",LI:"+423"},joinWaitlistBtn=document.getElementById("joinWaitlistBtn");waitlistForm&&waitlistForm.addEventListener("submit",async e=>{e.preventDefault();const t=document.getElementById("modalEmail")?.value||"",n=document.getElementById("modalPhone")?.value||"",o=document.getElementById("modalCountry")?.value||"",r={country_code:countryCodeMap[o]||"+91",phone:n},i=navigator.userAgent;let l="",a="";try{const e=await getIPGeo();l=e.ip,a=e.ip_details}catch{}const s={visit_id:getOrCreateVisitId(),email:t,phone:JSON.stringify(r),user_agent:i,ip:l,ip_details:a};try{const e=await fetch("/api/waitlist",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),t=await e.json();t&&"number"==typeof t.waitlist_number&&joinWaitlistBtn&&(joinWaitlistBtn.innerHTML=`<span class="number" id="queueCount">${t.waitlist_number}</span> Already in Waitlist, Click to Join`)}catch{}const c=document.getElementById("modalSuccess"),d=document.getElementById("modalFormSection");c&&d&&(d.style.display="none",c.style.display="")});const modalEmail=document.getElementById("modalEmail"),modalPhone=document.getElementById("modalPhone"),modalSubmit=document.querySelector(".modal-submit");function validateModalForm(){const e=modalEmail?.value.trim(),t=modalPhone?.value.trim(),n=e&&e.includes("@")&&t&&t.length>=10;modalSubmit&&(modalSubmit.disabled=!n)}function autoScrollCarousel(){const e=document.getElementById("carousel");if(!e)return;let t=null;const n=e.scrollWidth/3,o=e.scrollLeft;requestAnimationFrame(function r(i){t||(t=i);const l=Math.min((i-t)/1200,1);e.scrollLeft=o+n*l,l<1&&requestAnimationFrame(r)})}function onImagesAndWaitlistLoaded(e){let t=!1,n=!1;function o(){t&&n&&e()}const r=document.querySelectorAll("#carousel img");let i=0;0===r.length&&(t=!0),r.forEach(e=>{e.complete?(i++,i===r.length&&(t=!0,o())):(e.addEventListener("load",()=>{i++,i===r.length&&(t=!0,o())}),e.addEventListener("error",()=>{i++,i===r.length&&(t=!0,o())}))}),0===r.length&&o();const l=window.initWaitlistButton;window.initWaitlistButton=async function(){await l(),n=!0,o()}}modalEmail&&modalPhone&&modalSubmit&&(modalSubmit.disabled=!0,modalEmail.addEventListener("input",validateModalForm),modalPhone.addEventListener("input",validateModalForm)),onImagesAndWaitlistLoaded(autoScrollCarousel),document.addEventListener("contextmenu",function(e){e.preventDefault()}),document.addEventListener("DOMContentLoaded",function(){document.body.style.userSelect="none",document.querySelectorAll("img").forEach(function(e){e.style.userSelect="none"})}),document.addEventListener("keydown",function(e){if("F12"===e.key||e.ctrlKey&&e.shiftKey&&["I","J","C","U"].includes(e.key.toUpperCase())||e.metaKey&&e.altKey&&["I","J","C","U"].includes(e.key.toUpperCase()))return e.preventDefault(),e.stopPropagation(),!1});